## 类

#### 什么是类？

- **对象**：对象是类的一个实例（**对象不是找个女朋友**），有状态和行为。例如，一条狗是一个对象，它的状态有：颜色、名字、品种；行为有：摇尾巴、叫、吃等。
- **类**：类是一个模板，它描述一类对象的行为和状态

#### JavaScript中的类

类实际上是一个特殊的函数

#### 类的组织

类应该从一组变量列表开始，

公共静态变量

私有静态变量

私有变量实体

很少会有公共变量



公共函数跟在变量列表之后

私有工具函数紧随其后



符合自顶向下原则



封装

我们要保持变量和工具函数的私有性，但并不执着于此。



#### 类应该短小

类的名称应该描述其权责，命名也是帮助判断类长度的一个手段，如果无法精准命名，那么这个类可能就过长了



#### 单一权责原则

SRP，类或模块应该有且只有一条加以修改的理由



就像昨天hooks



系统应该由许多短小的类而不是少量巨大的类组成

每个小类封装一个权责，只有一个修改的原因，并与少数其他类一起协同达成期望的系统行为



#### 内聚

高内聚，低耦合

我们知道如何解耦，同时也应该知道高度内聚的标准

如果一个类中的每个变量都被每个方法所使用，则该类具有最大的内聚性

内聚性高，意味着类中的方法和变量互相依赖、互相结合成一个逻辑整体



当类失去了内聚性，就拆分它

此时程序会更有组织，也会拥有更透明的结构



10-5: 17个变量



OCP ： 开放-闭合原则

DIP：依赖导致原则

SRP：单一权责原则

TDD：测试驱动开发



## 系统

#### 如何建造一个城市



#### 将系统的构造与使用分开

类型安全检查

延迟初始化/赋值



#### 分解main



#### 工厂



#### 依赖注入

DI：依赖注入

IoC：控制反转



“不要给我们打电话，我们会给你打电话(don‘t call us, we‘ll call you)”这是著名的好莱坞原则。



**模板方法模式**充分的体现了“好莱坞”原则。IOC是Inversion of Control的简称，IOC的原理就是基于好莱坞原则，所有的组件都是被动的（Passive），所有的组件初始化和调用都由容器负责。

所有的framework都是遵循好莱坞原则设计的，否则就不叫framework。framework使用IoC的目的:
　　1.对基于接口编程的支持
　　2.减少单件和抽象工厂的依赖
　　3.降低业务和框架的耦合
　　4.业务组件可复用,可插拔



扩容



interface 和 abstract class 区别

前者只有一个接口描述，后者可以做具体实现作为base使用



AOP：面向切面编程



proxy



POJO：旧式Java对象



DSL：领域特定语言

DDD：领域驱动设计



学习：IOC容器



V8



进程与线程：区别



HashMap，线程不安全，多线程，不保证顺序

ConcurrentHashMap，切片，分表，加锁



